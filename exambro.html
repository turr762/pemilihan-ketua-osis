<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Secure Exam — Web</title>
<style>
/* ========= CSS ========= */

body, html {
  margin: 0;
  padding: 0;
  height: 100%;
  font-family: Arial, sans-serif;
  background: #f1f3f6;
  user-select: none;
}

.header {
  width: 100%;
  padding: 12px 20px;
  background: #1F2A44;
  color: white;
  font-size: 18px;
  font-weight: 500;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.exam-container {
  margin: auto;
  margin-top: 20px;
  background: white;
  border-radius: 10px;
  padding: 20px;
  width: 90%;
  max-width: 900px;
  box-shadow: 0px 4px 12px rgba(0,0,0,0.08);
}

.question-text {
  font-size: 20px;
  font-weight: 600;
  margin-bottom: 14px;
}

.choice {
  border: 1px solid #ddd;
  padding: 10px;
  border-radius: 8px;
  cursor: pointer;
  transition: 0.2s;
  margin-bottom: 6px;
}

.choice:hover {
  background: rgba(0, 0, 0, 0.04);
}

.btn {
  padding: 10px 18px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  margin-right: 6px;
  margin-top: 10px;
}

.btn-primary {
  background: #2F6FED;
  color: white;
}

.btn-secondary {
  background: #e0e0e0;
  color: #333;
}

.btn-danger {
  background: #E53935;
  color: white;
}

.btn:disabled {
  background: #c5c5c5;
  cursor: not-allowed;
}
</style>
</head>
<body>

<div class="header">
  <div>Secure Exam — Locked Browser</div>
  <div id="timerDisplay">60:00</div>
</div>

<div class="exam-container">
  <div id="questionBox" class="question-text"></div>
  <div id="choicesBox"></div>
  <br>

  <button class="btn btn-secondary" onclick="prevQ()">Previous</button>
  <button class="btn btn-primary" onclick="nextQ()">Next</button>
  <button class="btn btn-danger" onclick="submitExam()">Submit</button>
</div>

<script>
/* ========= JS ========= */

let current = 0;
let violations = 0;
let timeLeft = 60*60;

const questions = [
  { q:"Ibukota Indonesia?", c:["Bandung","Medan","Jakarta","Surabaya"], a:2 },
  { q:"Gunung tertinggi di Jawa?", c:["Merapi","Slamet","Sumbing","Semeru"], a:3 },
];

let answers = new Array(questions.length).fill(null);

function render(){
  document.getElementById("questionBox").innerText =
    `Question ${current+1}/${questions.length}: ${questions[current].q}`;

  let html = "";
  questions[current].c.forEach((opt,i)=>{
    html += `<div class="choice" onclick="selectAnswer(${i})">
      <input type="radio" name="ans" ${answers[current]==i?"checked":""}> ${opt}
    </div>`;
  });
  document.getElementById("choicesBox").innerHTML = html;
}

function selectAnswer(i){
  answers[current] = i;
}

function nextQ(){
  if(current < questions.length-1){
    current++;
    render();
  }
}

function prevQ(){
  if(current > 0){
    current--;
    render();
  }
}

function submitExam(){
  alert("Exam Submitted.\nJawaban: " + JSON.stringify(answers));
}

// Timer
setInterval(()=>{
  if(timeLeft>0){
    timeLeft--;
    let m = Math.floor(timeLeft/60);
    let s = timeLeft%60;
    document.getElementById("timerDisplay").innerText =
      `${m}:${s.toString().padStart(2,'0')}`;
  }
},1000);

// Prevent copy, paste, inspect, screenshot attempt etc
document.addEventListener("contextmenu", e => e.preventDefault());
document.addEventListener("copy", e => e.preventDefault());
document.addEventListener("paste", e => e.preventDefault());
document.addEventListener("cut", e => e.preventDefault());

document.addEventListener("keydown", e => {
  if(e.ctrlKey && e.key === 'c') e.preventDefault();
  if(e.ctrlKey && e.key === 'v') e.preventDefault();
  if(e.key === "F12") e.preventDefault();
});

// Anti minimize / tab switch detection
document.addEventListener("visibilitychange",()=>{
  if(document.hidden){
    violations++;
    console.log("Violation detected:", violations);
    if(violations>=3){
      alert("Terlalu banyak pelanggaran! Ujian otomatis dikunci!");
      submitExam();
    }
  }
});

render();
</script>
</body>
</html>